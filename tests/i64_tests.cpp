#include <algorithm>
#include <vector>
#include <iterator>
#include <cstdlib>
#include <iostream>
#include <math.h>

#include <catch2/catch.hpp>

#include "utils.hpp"
#include <wasm_config.hpp>

#include <eosio/vm/backend.hpp>

using namespace eosio;
using namespace eosio::vm;

extern wasm_allocator wa;

using backend_t = backend<std::nullptr_t>;

TEST_CASE("Testing wasm i64 ops", "[i64_tests]") {
   auto code = backend_t::read_wasm( i64_wasm );
   backend_t bkend( code );
   bkend.set_wasm_allocator( &wa );

   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "add", (uint64_t)1, (uint64_t)1)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "add", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "add", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)-2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "add", (uint64_t)-1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "add", (uint64_t)0x7fffffffffffffff, (uint64_t)1)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "add", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0x7fffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "add", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "add", (uint64_t)0x3fffffff, (uint64_t)1)) == (uint64_t)0x40000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "sub", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "sub", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "sub", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "sub", (uint64_t)0x7fffffffffffffff, (uint64_t)-1)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "sub", (uint64_t)0x8000000000000000, (uint64_t)1)) == (uint64_t)0x7fffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "sub", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "sub", (uint64_t)0x3fffffff, (uint64_t)-1)) == (uint64_t)0x40000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)1, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)0x1000000000000000, (uint64_t)4096)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)0x7fffffffffffffff, (uint64_t)-1)) == (uint64_t)0x8000000000000001);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)0x0123456789abcdef, (uint64_t)0xfedcba9876543210)) == (uint64_t)0x2236d88fe5618cf0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "mul", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)1, (uint64_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)0, (uint64_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)0x8000000000000000, (uint64_t)-1), eosio::vm::wasm_interpreter_exception);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)0, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)0x8000000000000000, (uint64_t)2)) == (uint64_t)0xc000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)0x8000000000000001, (uint64_t)1000)) == (uint64_t)0xffdf3b645a1cac09);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)5, (uint64_t)2)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)-5, (uint64_t)2)) == (uint64_t)-2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)5, (uint64_t)-2)) == (uint64_t)-2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)-5, (uint64_t)-2)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)7, (uint64_t)3)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)-7, (uint64_t)3)) == (uint64_t)-2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)7, (uint64_t)-3)) == (uint64_t)-2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)-7, (uint64_t)-3)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)11, (uint64_t)5)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_s", (uint64_t)17, (uint64_t)7)) == (uint64_t)2);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)1, (uint64_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)0, (uint64_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)0x8000000000000000, (uint64_t)2)) == (uint64_t)0x4000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)0x8ff00ff00ff00ff0, (uint64_t)0x100000001)) == (uint64_t)0x8ff00fef);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)0x8000000000000001, (uint64_t)1000)) == (uint64_t)0x20c49ba5e353f7);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)5, (uint64_t)2)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)-5, (uint64_t)2)) == (uint64_t)0x7ffffffffffffffd);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)5, (uint64_t)-2)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)-5, (uint64_t)-2)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)7, (uint64_t)3)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)11, (uint64_t)5)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "div_u", (uint64_t)17, (uint64_t)7)) == (uint64_t)2);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)1, (uint64_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)0, (uint64_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)0x7fffffffffffffff, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)0, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)0x8000000000000000, (uint64_t)2)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)0x8000000000000001, (uint64_t)1000)) == (uint64_t)-807);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)5, (uint64_t)2)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)-5, (uint64_t)2)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)5, (uint64_t)-2)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)-5, (uint64_t)-2)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)7, (uint64_t)3)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)-7, (uint64_t)3)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)7, (uint64_t)-3)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)-7, (uint64_t)-3)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)11, (uint64_t)5)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_s", (uint64_t)17, (uint64_t)7)) == (uint64_t)3);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)1, (uint64_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)0, (uint64_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)0x8000000000000000, (uint64_t)2)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)0x8ff00ff00ff00ff0, (uint64_t)0x100000001)) == (uint64_t)0x80000001);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)0x8000000000000001, (uint64_t)1000)) == (uint64_t)809);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)5, (uint64_t)2)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)-5, (uint64_t)2)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)5, (uint64_t)-2)) == (uint64_t)5);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)-5, (uint64_t)-2)) == (uint64_t)-5);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)7, (uint64_t)3)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)11, (uint64_t)5)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rem_u", (uint64_t)17, (uint64_t)7)) == (uint64_t)3);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "and", (uint64_t)1, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "and", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "and", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "and", (uint64_t)0, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "and", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "and", (uint64_t)0x7fffffffffffffff, (uint64_t)-1)) == (uint64_t)0x7fffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "and", (uint64_t)0xf0f0ffff, (uint64_t)0xfffff0f0)) == (uint64_t)0xf0f0f0f0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "and", (uint64_t)0xffffffffffffffff, (uint64_t)0xffffffffffffffff)) == (uint64_t)0xffffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "or", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "or", (uint64_t)0, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "or", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "or", (uint64_t)0, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "or", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "or", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "or", (uint64_t)0xf0f0ffff, (uint64_t)0xfffff0f0)) == (uint64_t)0xffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "or", (uint64_t)0xffffffffffffffff, (uint64_t)0xffffffffffffffff)) == (uint64_t)0xffffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)0, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)0, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)0x7fffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)-1, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)0xf0f0ffff, (uint64_t)0xfffff0f0)) == (uint64_t)0x0f0f0f0f);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "xor", (uint64_t)0xffffffffffffffff, (uint64_t)0xffffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)1, (uint64_t)1)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)0x7fffffffffffffff, (uint64_t)1)) == (uint64_t)0xfffffffffffffffe);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)0xffffffffffffffff, (uint64_t)1)) == (uint64_t)0xfffffffffffffffe);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)0x8000000000000000, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)0x4000000000000000, (uint64_t)1)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)1, (uint64_t)63)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)1, (uint64_t)64)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)1, (uint64_t)65)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)1, (uint64_t)-1)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shl", (uint64_t)1, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)-1, (uint64_t)1)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)0x7fffffffffffffff, (uint64_t)1)) == (uint64_t)0x3fffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)0x8000000000000000, (uint64_t)1)) == (uint64_t)0xc000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)0x4000000000000000, (uint64_t)1)) == (uint64_t)0x2000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)1, (uint64_t)64)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)1, (uint64_t)65)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)1, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)1, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)0x8000000000000000, (uint64_t)63)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)-1, (uint64_t)64)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)-1, (uint64_t)65)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)-1, (uint64_t)0x7fffffffffffffff)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_s", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)-1, (uint64_t)1)) == (uint64_t)0x7fffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)0x7fffffffffffffff, (uint64_t)1)) == (uint64_t)0x3fffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)0x8000000000000000, (uint64_t)1)) == (uint64_t)0x4000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)0x4000000000000000, (uint64_t)1)) == (uint64_t)0x2000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)1, (uint64_t)64)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)1, (uint64_t)65)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)1, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)1, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)0x8000000000000000, (uint64_t)63)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)-1, (uint64_t)64)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)-1, (uint64_t)65)) == (uint64_t)0x7fffffffffffffff);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)-1, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "shr_u", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)1, (uint64_t)1)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)-1, (uint64_t)1)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)1, (uint64_t)64)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)0xabcd987602468ace, (uint64_t)1)) == (uint64_t)0x579b30ec048d159d);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)0xfe000000dc000000, (uint64_t)4)) == (uint64_t)0xe000000dc000000f);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)0xabcd1234ef567809, (uint64_t)53)) == (uint64_t)0x013579a2469deacf);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)0xabd1234ef567809c, (uint64_t)63)) == (uint64_t)0x55e891a77ab3c04e);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)0xabcd1234ef567809, (uint64_t)0xf5)) == (uint64_t)0x013579a2469deacf);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)0xabcd7294ef567809, (uint64_t)0xffffffffffffffed)) == (uint64_t)0xcf013579ae529dea);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)0xabd1234ef567809c, (uint64_t)0x800000000000003f)) == (uint64_t)0x55e891a77ab3c04e);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)1, (uint64_t)63)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotl", (uint64_t)0x8000000000000000, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)1, (uint64_t)1)) == (uint64_t)0x8000000000000000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)-1, (uint64_t)1)) == (uint64_t)-1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)1, (uint64_t)64)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)0xabcd987602468ace, (uint64_t)1)) == (uint64_t)0x55e6cc3b01234567);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)0xfe000000dc000000, (uint64_t)4)) == (uint64_t)0x0fe000000dc00000);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)0xabcd1234ef567809, (uint64_t)53)) == (uint64_t)0x6891a77ab3c04d5e);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)0xabd1234ef567809c, (uint64_t)63)) == (uint64_t)0x57a2469deacf0139);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)0xabcd1234ef567809, (uint64_t)0xf5)) == (uint64_t)0x6891a77ab3c04d5e);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)0xabcd7294ef567809, (uint64_t)0xffffffffffffffed)) == (uint64_t)0x94a77ab3c04d5e6b);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)0xabd1234ef567809c, (uint64_t)0x800000000000003f)) == (uint64_t)0x57a2469deacf0139);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)1, (uint64_t)63)) == (uint64_t)2);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "rotr", (uint64_t)0x8000000000000000, (uint64_t)63)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "clz", (uint64_t)0xffffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "clz", (uint64_t)0)) == (uint64_t)64);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "clz", (uint64_t)0x00008000)) == (uint64_t)48);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "clz", (uint64_t)0xff)) == (uint64_t)56);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "clz", (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "clz", (uint64_t)1)) == (uint64_t)63);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "clz", (uint64_t)2)) == (uint64_t)62);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "clz", (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "ctz", (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "ctz", (uint64_t)0)) == (uint64_t)64);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "ctz", (uint64_t)0x00008000)) == (uint64_t)15);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "ctz", (uint64_t)0x00010000)) == (uint64_t)16);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "ctz", (uint64_t)0x8000000000000000)) == (uint64_t)63);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "ctz", (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "popcnt", (uint64_t)-1)) == (uint64_t)64);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "popcnt", (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "popcnt", (uint64_t)0x00008000)) == (uint64_t)1);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "popcnt", (uint64_t)0x8000800080008000)) == (uint64_t)4);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "popcnt", (uint64_t)0x7fffffffffffffff)) == (uint64_t)63);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "popcnt", (uint64_t)0xAAAAAAAA55555555)) == (uint64_t)32);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "popcnt", (uint64_t)0x99999999AAAAAAAA)) == (uint64_t)32);
   CHECK(to_ui64(*bkend.call_with_return(nullptr, "env", "popcnt", (uint64_t)0xDEADBEEFDEADBEEF)) == (uint64_t)48);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eqz", (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eqz", (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eqz", (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eqz", (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eqz", (uint64_t)0xffffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)-1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)1, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "eq", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)-1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ne", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)-1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)1, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)-1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)1, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)-1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)1, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_s", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)-1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)1, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "le_u", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)-1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)-1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)-1, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)-1, (uint64_t)1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0x8000000000000000, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0x7fffffffffffffff, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)-1, (uint64_t)-1)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)1, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0, (uint64_t)1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0x8000000000000000, (uint64_t)0)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0, (uint64_t)0x8000000000000000)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0x8000000000000000, (uint64_t)-1)) == (uint64_t)0);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)-1, (uint64_t)0x8000000000000000)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0x8000000000000000, (uint64_t)0x7fffffffffffffff)) == (uint64_t)1);
   CHECK(to_ui32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint64_t)0x7fffffffffffffff, (uint64_t)0x8000000000000000)) == (uint64_t)0);
}
