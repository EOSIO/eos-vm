#include <algorithm>
#include <vector>
#include <iterator>
#include <cstdlib>
#include <iostream>
#include <math.h>

#include <catch2/catch.hpp>

#include "utils.hpp"
#include <wasm_config.hpp>

#include <eosio/vm/backend.hpp>

using namespace eosio;
using namespace eosio::vm;

extern wasm_allocator wa;

using backend_t = backend<std::nullptr_t>;

TEST_CASE("Testing wasm i32 ops", "[i32_tests]") {
   auto code = backend_t::read_wasm( i32_wasm );
   backend_t bkend( code );
   bkend.set_wasm_allocator( &wa );

   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "add", (uint32_t)1, (uint32_t)1)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "add", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "add", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)-2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "add", (uint32_t)-1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "add", (uint32_t)0x7fffffff, (uint32_t)1)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "add", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0x7fffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "add", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "add", (uint32_t)0x3fffffff, (uint32_t)1)) == (uint32_t)0x40000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "sub", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "sub", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "sub", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "sub", (uint32_t)0x7fffffff, (uint32_t)-1)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "sub", (uint32_t)0x80000000, (uint32_t)1)) == (uint32_t)0x7fffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "sub", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "sub", (uint32_t)0x3fffffff, (uint32_t)-1)) == (uint32_t)0x40000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)1, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)0x10000000, (uint32_t)4096)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)0x7fffffff, (uint32_t)-1)) == (uint32_t)0x80000001);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)0x01234567, (uint32_t)0x76543210)) == (uint32_t)0x358e7470);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "mul", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK_THROWS_AS(bkend(nullptr, "env", "div_s", (uint32_t)1, (uint32_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend(nullptr, "env", "div_s", (uint32_t)0, (uint32_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend(nullptr, "env", "div_s", (uint32_t)0x80000000, (uint32_t)-1), eosio::vm::wasm_interpreter_exception);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)0, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)0x80000000, (uint32_t)2)) == (uint32_t)0xc0000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)0x80000001, (uint32_t)1000)) == (uint32_t)0xffdf3b65);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)5, (uint32_t)2)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)-5, (uint32_t)2)) == (uint32_t)-2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)5, (uint32_t)-2)) == (uint32_t)-2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)-5, (uint32_t)-2)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)7, (uint32_t)3)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)-7, (uint32_t)3)) == (uint32_t)-2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)7, (uint32_t)-3)) == (uint32_t)-2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)-7, (uint32_t)-3)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)11, (uint32_t)5)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_s", (uint32_t)17, (uint32_t)7)) == (uint32_t)2);
   CHECK_THROWS_AS(bkend(nullptr, "env", "div_u", (uint32_t)1, (uint32_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend(nullptr, "env", "div_u", (uint32_t)0, (uint32_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)0x80000000, (uint32_t)2)) == (uint32_t)0x40000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)0x8ff00ff0, (uint32_t)0x10001)) == (uint32_t)0x8fef);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)0x80000001, (uint32_t)1000)) == (uint32_t)0x20c49b);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)5, (uint32_t)2)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)-5, (uint32_t)2)) == (uint32_t)0x7ffffffd);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)5, (uint32_t)-2)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)-5, (uint32_t)-2)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)7, (uint32_t)3)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)11, (uint32_t)5)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "div_u", (uint32_t)17, (uint32_t)7)) == (uint32_t)2);
   CHECK_THROWS_AS(bkend(nullptr, "env", "rem_s", (uint32_t)1, (uint32_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend(nullptr, "env", "rem_s", (uint32_t)0, (uint32_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)0x7fffffff, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)0, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)0x80000000, (uint32_t)2)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)0x80000001, (uint32_t)1000)) == (uint32_t)-647);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)5, (uint32_t)2)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)-5, (uint32_t)2)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)5, (uint32_t)-2)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)-5, (uint32_t)-2)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)7, (uint32_t)3)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)-7, (uint32_t)3)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)7, (uint32_t)-3)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)-7, (uint32_t)-3)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)11, (uint32_t)5)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_s", (uint32_t)17, (uint32_t)7)) == (uint32_t)3);
   CHECK_THROWS_AS(bkend(nullptr, "env", "rem_u", (uint32_t)1, (uint32_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK_THROWS_AS(bkend(nullptr, "env", "rem_u", (uint32_t)0, (uint32_t)0), eosio::vm::wasm_interpreter_exception);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)0x80000000, (uint32_t)2)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)0x8ff00ff0, (uint32_t)0x10001)) == (uint32_t)0x8001);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)0x80000001, (uint32_t)1000)) == (uint32_t)649);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)5, (uint32_t)2)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)-5, (uint32_t)2)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)5, (uint32_t)-2)) == (uint32_t)5);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)-5, (uint32_t)-2)) == (uint32_t)-5);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)7, (uint32_t)3)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)11, (uint32_t)5)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rem_u", (uint32_t)17, (uint32_t)7)) == (uint32_t)3);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "and", (uint32_t)1, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "and", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "and", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "and", (uint32_t)0, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "and", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "and", (uint32_t)0x7fffffff, (uint32_t)-1)) == (uint32_t)0x7fffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "and", (uint32_t)0xf0f0ffff, (uint32_t)0xfffff0f0)) == (uint32_t)0xf0f0f0f0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "and", (uint32_t)0xffffffff, (uint32_t)0xffffffff)) == (uint32_t)0xffffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "or", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "or", (uint32_t)0, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "or", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "or", (uint32_t)0, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "or", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "or", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "or", (uint32_t)0xf0f0ffff, (uint32_t)0xfffff0f0)) == (uint32_t)0xffffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "or", (uint32_t)0xffffffff, (uint32_t)0xffffffff)) == (uint32_t)0xffffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)0, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)0, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)0x7fffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)-1, (uint32_t)0x7fffffff)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)0xf0f0ffff, (uint32_t)0xfffff0f0)) == (uint32_t)0x0f0f0f0f);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "xor", (uint32_t)0xffffffff, (uint32_t)0xffffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)1, (uint32_t)1)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)0x7fffffff, (uint32_t)1)) == (uint32_t)0xfffffffe);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)0xffffffff, (uint32_t)1)) == (uint32_t)0xfffffffe);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)0x80000000, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)0x40000000, (uint32_t)1)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)1, (uint32_t)31)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)1, (uint32_t)32)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)1, (uint32_t)33)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)1, (uint32_t)-1)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shl", (uint32_t)1, (uint32_t)0x7fffffff)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)-1, (uint32_t)1)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)0x7fffffff, (uint32_t)1)) == (uint32_t)0x3fffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)0x80000000, (uint32_t)1)) == (uint32_t)0xc0000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)0x40000000, (uint32_t)1)) == (uint32_t)0x20000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)1, (uint32_t)32)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)1, (uint32_t)33)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)1, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)1, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)0x80000000, (uint32_t)31)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)-1, (uint32_t)32)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)-1, (uint32_t)33)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)-1, (uint32_t)0x7fffffff)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_s", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)-1, (uint32_t)1)) == (uint32_t)0x7fffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)0x7fffffff, (uint32_t)1)) == (uint32_t)0x3fffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)0x80000000, (uint32_t)1)) == (uint32_t)0x40000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)0x40000000, (uint32_t)1)) == (uint32_t)0x20000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)1, (uint32_t)32)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)1, (uint32_t)33)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)1, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)1, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)0x80000000, (uint32_t)31)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)-1, (uint32_t)32)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)-1, (uint32_t)33)) == (uint32_t)0x7fffffff);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)-1, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "shr_u", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)1, (uint32_t)1)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)-1, (uint32_t)1)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)1, (uint32_t)32)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)0xabcd9876, (uint32_t)1)) == (uint32_t)0x579b30ed);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)0xfe00dc00, (uint32_t)4)) == (uint32_t)0xe00dc00f);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)0xb0c1d2e3, (uint32_t)5)) == (uint32_t)0x183a5c76);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)0x00008000, (uint32_t)37)) == (uint32_t)0x00100000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)0xb0c1d2e3, (uint32_t)0xff05)) == (uint32_t)0x183a5c76);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)0x769abcdf, (uint32_t)0xffffffed)) == (uint32_t)0x579beed3);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)0x769abcdf, (uint32_t)0x8000000d)) == (uint32_t)0x579beed3);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)1, (uint32_t)31)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotl", (uint32_t)0x80000000, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)1, (uint32_t)1)) == (uint32_t)0x80000000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)-1, (uint32_t)1)) == (uint32_t)-1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)1, (uint32_t)32)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)0xff00cc00, (uint32_t)1)) == (uint32_t)0x7f806600);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)0x00080000, (uint32_t)4)) == (uint32_t)0x00008000);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)0xb0c1d2e3, (uint32_t)5)) == (uint32_t)0x1d860e97);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)0x00008000, (uint32_t)37)) == (uint32_t)0x00000400);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)0xb0c1d2e3, (uint32_t)0xff05)) == (uint32_t)0x1d860e97);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)0x769abcdf, (uint32_t)0xffffffed)) == (uint32_t)0xe6fbb4d5);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)0x769abcdf, (uint32_t)0x8000000d)) == (uint32_t)0xe6fbb4d5);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)1, (uint32_t)31)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "rotr", (uint32_t)0x80000000, (uint32_t)31)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "clz", (uint32_t)0xffffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "clz", (uint32_t)0)) == (uint32_t)32);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "clz", (uint32_t)0x00008000)) == (uint32_t)16);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "clz", (uint32_t)0xff)) == (uint32_t)24);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "clz", (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "clz", (uint32_t)1)) == (uint32_t)31);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "clz", (uint32_t)2)) == (uint32_t)30);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "clz", (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ctz", (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ctz", (uint32_t)0)) == (uint32_t)32);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ctz", (uint32_t)0x00008000)) == (uint32_t)15);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ctz", (uint32_t)0x00010000)) == (uint32_t)16);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ctz", (uint32_t)0x80000000)) == (uint32_t)31);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ctz", (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "popcnt", (uint32_t)-1)) == (uint32_t)32);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "popcnt", (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "popcnt", (uint32_t)0x00008000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "popcnt", (uint32_t)0x80008000)) == (uint32_t)2);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "popcnt", (uint32_t)0x7fffffff)) == (uint32_t)31);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "popcnt", (uint32_t)0xAAAAAAAA)) == (uint32_t)16);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "popcnt", (uint32_t)0x55555555)) == (uint32_t)16);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "popcnt", (uint32_t)0xDEADBEEF)) == (uint32_t)24);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eqz", (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eqz", (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eqz", (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eqz", (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eqz", (uint32_t)0xffffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)-1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)1, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "eq", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)-1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ne", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)-1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)1, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_s", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)-1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)1, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "lt_u", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)-1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)1, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_s", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)-1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)1, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "le_u", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)-1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_s", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)-1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "gt_u", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)-1, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_s", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)-1, (uint32_t)1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0x80000000, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0x7fffffff, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)-1, (uint32_t)-1)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)1, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0, (uint32_t)1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0x80000000, (uint32_t)0)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0, (uint32_t)0x80000000)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0x80000000, (uint32_t)-1)) == (uint32_t)0);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)-1, (uint32_t)0x80000000)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0x80000000, (uint32_t)0x7fffffff)) == (uint32_t)1);
   CHECK(to_i32(*bkend.call_with_return(nullptr, "env", "ge_u", (uint32_t)0x7fffffff, (uint32_t)0x80000000)) == (uint32_t)0);
}
